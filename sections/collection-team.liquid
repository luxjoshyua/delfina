

{% schema %}
{
  "name": "Teamlist",
  "blocks": [
    {
      "name": "Team",
      "type": "text",
      "settings": [
        {
          "id": "teamid",
          "label": "Team ID",
          "type": "text",
          "default": "TEAM ID GOES HERE"
        },
        {
          "id": "main_color",
          "label": "Main Color",
          "type": "color",
          "default": "#fff"
        },
        {
          "id": "main_logo",
          "label": "Logo",
          "type": "image_picker"
        },
        {
          "id": "main__apparel-types",
          "label": "Apparel Types",
          "type": "text"
        }
      ]
    }
  ]
}
{% endschema %}
{% assign teamid = collection.id | downcase %}
{% for content in section.blocks %}	
    {% if content.settings.teamid == teamid  %}
		<style>
          	.team--bg-primary-color {
              background: {{ content.settings.main_color }};
            }
          
          	.team--bg-logo {
              background-image:url({{ content.settings.main_logo | img_url: "200x200" }});
              padding-bottom: 16px;
            }

		</style>
    {% endif %}
{% endfor %}


<style>
    .team--hero {
        display:flex;
        height: 380px;
        flex-flow:row wrap;
    }
    .team--img {
        width:60%;
        height:100%;
        background-size:cover;
        background-position:center;
        background-image: url({{ collection.image | img_url: "1000x600" }})
    }
    @media all and (max-width:700px) {
        .team--hero-img, .team--title {
            width:100%;
        }
    }
    
    .team--title {
      width: 40%; 
        align-items: flex-start;
        display:flex;
        flex-direction:column;
        color:white;
        justify-content: center;
        padding: 50px;
        background:#0566bb;
        color:white;
    }

    .team--title-h1 {
      font-size: 64px;
      line-height: 1.3;
    }

    .team--title p {
        color:white;
    }

    .team--title li {
        list-style:circle;
        margin-left:20px;
    }


    .team--countdown {
        margin : 25px 0;
    }

    .team--countdown h2 {
        font-size:42px;
    }



    .team--password-overlay {
        position:fixed;
        top:0;
        left:0;
        right:0;
        bottom:0;
        background: #0566bb;
        z-index:50000;
    }

    .team--password-box {
        position:relative;
        left:50%;
        top:50%;
        transform:translate(-50%, -50%);
        padding:45px;
        background: #222;
        width:400px;
        display:flex;
        flex-direction:column;
        justify-content:center;
        border-radius: 8px;
        box-shadow: 0 2px 4px 3px #0000006b;
    }

    .team--password-box input {
        border:none;
    }

    .team--password-box input[type=text] {
        margin-bottom:10px;
        padding:8px 16px;
        font-weight:600;
        color:#222;
    }

    .team--password-box input[type=submit] {
        background:#0566bb;
        color:white;
        font-weight:800;
    }

    .team--password-error {
        display:none;
        color:white;
    }

</style>





<div class="team--password-overlay">


    <div class="team--password-box">
        <p class="team--password-error">Incorrect password. Try again.</p>
        <input type="password" placeholder="Password" id="team--password" autofocus>
        <input type = "submit" value="SUBMIT" id="team--submit">
    </div>

</div>

<script>
//when submit pressed
//check password
//if good then hide overlay
//if bad then error
var teamPasswordInput = document.getElementById("team--password");
function checkPassword() {
    if (teamPasswordInput.value === "SYDNEY") {
        document.querySelector(".team--password-overlay").style.display = "none";
    } else {
        document.querySelector(".team--password-error").style.display = "block";
        setTimeout(function() {
            document.querySelector(".team--password-error").style.display = "none";
        }, 5000);
    }
}
document.getElementById("team--submit").addEventListener("click", checkPassword);
teamPasswordInput.addEventListener("keydown", e => {
    if (e.key === "Enter") {
        checkPassword();
    }
})
</script>


<div class="team--hero">
    <div class="team--title">
      <img class="team--bg-logo" src={{content.settings.main_logo}}>
      <h1 class="team--title-h1">{{ collection.title }}</h1>
      <p>
        All orders will arrive on February 30 and will be available for collection from Amanie Janes (ajanes1@bigpond.com). 
        Please note, compulsory Club Items include:
      </p>
      <ul> 
      <li>Water Polo Swimwear</li>
    <li>Polo Shirt</li>
    <li>Towel</li>

      </ul>
    </div>
    <div class="team--img team--bg-img">
    </div>
</div>


<div class="team--countdown">
    <h2 id="time-remaining"></h2>
</div>


<script>
//set up time remaining as days hrs mins seconds
const endDate = new Date("02 / 28 / 2020");
const difference = new Date() - endDate;
const milisInDay = 1000 * 60 * 60 * 24;

function getCountAndRemaining(time, frame) {
    return [Math.floor(time / frame) * -1 - 1, time % frame];
}

function countDown(days, hours, minutes, seconds) {

    if (seconds > 0) {
        seconds -= 1;
    } else {
        seconds = 59;
        minutes -= 1;

        if (minutes > 0) {
            minutes -= 1;
        } else {
            minutes = 59;
            hours -= 1;

            if (hours > 0) {
                hours -= 1;
            } else {
                hours = 23;
                days -= 1;
            }
        }
    }
    write(days, hours, minutes, seconds);

    setTimeout(() => {
        countDown(days, hours, minutes, seconds)
    }, 1000)
}

function write(days, hours, minutes, seconds) {
    document.getElementById("time-remaining").textContent = `${days} DAYS. ${hours} HOURS. ${minutes} MINUTES. ${seconds} SECONDS.`
}

const [days, remainderDays] = getCountAndRemaining(difference, milisInDay);

const [hours, remainderHours] = getCountAndRemaining(remainderDays, milisInDay / 24);

const [minutes, remainderMinutes] = getCountAndRemaining(remainderHours, milisInDay / 24 / 60);

const [seconds, _] = getCountAndRemaining(remainderMinutes, milisInDay / 24 / 60 / 60);

countDown(days, hours, minutes, seconds);




</script>


